schemaVersion: 2.1.0
metadata:
  name: rust
  description: 'A language empowering everyone to build reliable and efficient software.'
  displayName: Rust 1.x
  icon: https://www.rust-lang.org/static/images/rust-logo-blk.svg
  version: 1.0.0
  projectType: Rust
  language: Rust
  tags:
    - Rust
components:
  - name: runtime
    container:
      image: quay.io/ctrontesting/rust:1
      command: ['tail', '-f', '/dev/null']
      memoryLimit: 1024Mi
      mountSources: true
      volumeMounts:
        - name: cargo
          path: /usr/local/cargo
  - name: cargo
    volume:
      size: 3Gi
commands:
  - id: check
    exec:
      component: runtime
      commandLine: cargo check
      workingDir: ${PROJECT_SOURCE}
      group:
        isDefault: true
        kind: build
  - id: build
    exec:
      component: runtime
      commandLine: cargo build
      workingDir: ${PROJECT_SOURCE}
      group:
        isDefault: false
        kind: build
  - id: run
    exec:
      component: runtime
      commandLine: cargo run
      workingDir: ${PROJECT_SOURCE}
      group:
        isDefault: false
        kind: run
  - id: test
    exec:
      component: runtime
      commandLine: cargo test
      workingDir: ${PROJECT_SOURCE}
      group:
        kind: test
        isDefault: true
